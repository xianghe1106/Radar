/*
 * Protocol.h
 *
 *  Created on: Dec 11, 2018
 *      Author: xianghe
 */

#ifndef USER_APP_PROTOCOL_H_
#define USER_APP_PROTOCOL_H_



/*
*********************************************************************************************************
*                                            INCLUDE FILES
*********************************************************************************************************
*/

#include "cpu.h"
#include "XMC1300.h"

/*
*********************************************************************************************************
*                                               DEFINES
*********************************************************************************************************
*/



/*
*********************************************************************************************************
*                                             DATA TYPES
*********************************************************************************************************
*/

enum
{
	CMD_SUCCEED = 0, DATA_OVERFLOW=1, UNSUPPORT_PARAMETER = 2, CRC_ERROR = 3,
	SYSTEM_BUSY = 4, UNSUPPORT_CMD = 5, REV_SHORT=6, NO_CALDATA=7, FLIEPAG_ERROR=8
};

typedef struct
{
//	INT8U CommandType;		//1:set	0:get
	INT8U RxFrameLen;
	INT8U *ErrorCode;
	INT8U *Para;
	INT8U *Output;
	INT8U *DynamicLen;
}ProtocolMsg_TypeDef;

struct NEURON
{
	INT16U Command;
	void (*Cell)(ProtocolMsg_TypeDef ProtocolMsg);
	INT16U DataLen;
};

/*
*********************************************************************************************************
*                                          GLOBAL VARIABLES
*********************************************************************************************************
*/



/*
*********************************************************************************************************
*                                               MACRO'S
*********************************************************************************************************
*/

#define START_BYTE								0x7E
#define STOP_BYTE								0x7E


/*
*********************************************************************************************************
*                                         FUNCTION PROTOTYPES
*********************************************************************************************************
*/

void Protocol_init(void);
void Protocol_preprocessing(void);
void Protocol_process(void);



/*
*********************************************************************************************************
*                                               END
*********************************************************************************************************
*/

#endif /* USER_APP_PROTOCOL_H_ */
